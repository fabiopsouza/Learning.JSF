<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:f="http://java.sun.com/jsf/core">

<h:head>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Escopos</title>

</h:head>
<h:body>

	<h:form>
		<h:commandLink value="Ajuda sobre essa tela" action="AjudaGestaoProdutos?faces-redirect=true">
			<f:actionListener binding="#{registroCliqueBotaoListener}"/>
		</h:commandLink>
	</h:form>

	<h:form>
		Nome:
		<h:inputText value="#{gestaoProdutosBean.produto.nome}"/>
		<br/>
		
		Fabricante:
		<h:inputText value="#{gestaoProdutosBean.produto.fabricante}"/>
		<br/>
		
		Categoria:
		<h:inputText value="#{gestaoProdutosBean.produto.categoria}"/>
		<br/>
		
		<h:commandButton value="Incluir" action="#{gestaoProdutosBean.incluir}" 
			actionListener="#{gestaoProdutosBean.verificarInclusao}">
			<f:actionListener binding="#{registroCliqueBotaoListener}"/>
		</h:commandButton>
	</h:form>

	<br/>
	
	<h:form>
		Pesquisa por produto: 
		<h:inputText value="#{gestaoProdutosBean.fabricantePesquisa}" 
			valueChangeListener="#{gestaoProdutosBean.fabricantePesquisaAlterado}"
			onchange="submit()"/>
	</h:form>

	<ol>
		<ui:repeat var="produto" value="#{gestaoProdutosBean.produtosFiltrados}">
			<li>
				<h:form>
				#{produto.nome} - #{produto.fabricante} - #{produto.categoria} | 
					<h:commandButton value="Excluir" action="#{gestaoProdutosBean.excluir}">
						<f:setPropertyActionListener value="#{produto}" target="#{gestaoProdutosBean.produtoSelecionado}" />
					</h:commandButton>
				</h:form> 
			</li>
		</ui:repeat>
	</ol>

	
</h:body>
</html>